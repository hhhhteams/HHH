<script src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/Style%20Library/js/angular/Services/main.js"></script>
<script src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/_layouts/15/sp.RequestExecutor.js"></script>
<script type="text/javascript" src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/Style%20Library/js/angular/Services/jquery.SPServices-2014.01.min.js"></script>
<!--<script src="https://www.shareweb.ch/site/ei/Style%20Library/js/angular/RestBatchExecutor.min.js"></script>-->
<script src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/Style%20Library/js/angular/Services/render.min.js?updated=02-04-2018-2"></script>
<style>
</style>
<div id="EditTask">
    <div class="panel" ng-cloak>
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" ng-click="cancelEditItem()" style="min-width: 10px;">&times;</button>
            <h4 class="modal-title"><img class="icon-sites-img" ng-src="{{selectedSiteImage.Item_x005F_x0020_Cover.Url}}"> Update Task - {{backupItem.Title}} ({{Item.siteType}}) <a class="hreflink" title="Delete" data-toggle="modal" ng-click="deleteTaskFromPopUp()"></a></h4>
        </div>
        <ng-form name="UpdateTaskForm" novalidate role="form">
            <div class="modal-body pad10">
                <div class="tabBox clearfix">
                    <div id="tabs" class="exTab3">
                        <ul class="nav nav-pills">
                            <li class="active">
                                <a href="#basicInfo" data-toggle="tab">BASIC INFORMATION </a>
                            </li>
                            <li>
                                <a href="#teamInfo" data-toggle="tab">TASK TEAM </a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="basicInfo">
                                <div class="form-horizontal">
                                    <table style="width:100%">
                                        <tr>
                                            <td valign="top" width="65%">
                                                <div class="form-group">
                                                    <div class="col-sm-6" title="Task Name">
                                                        <label>Title</label>
                                                        <div class="pull-right">
                                                            <input type="checkbox" id="isChecked" ng-model="isChecked" ng-checked="Item.IsTodaysTask==1" ng-click="checkTodayTask(isChecked)" />Working Today?
                                                        </div>
                                                        <input type="text" class="form-control" placeholder="Task Name" ng-required="true" ng-model="Item.Title" />
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label>Due Date</label>
                                                        <input type="text" id="dueDatePicker" placeholder="DD/MM/YYYY" class="form-control" ng-model="Item.DueDate" />
                                                        <!--<datetimepicker ng-model="Item.DueDate"
                                                        date-format="{{format}}"
                                                        name="datetimepicker"
                                                        hidden-time="true" show-weeks="false" show-button-bar="false"></datetimepicker>-->
                                                    </div>
                                                    <div class="col-sm-2 no-padding">
                                                        <label>Follow up</label>
                                                        <select ng-model="value" ng-change="SelectFollowUpdate(value)" class="form-control no-padding">
                                                            <!--ng-change="getdatedisplay(value)"-->
                                                            <option value="">Select</option>
                                                            <option value="Today">Today</option>
                                                            <option value="Tomorrow">Tomorrow</option>
                                                            <option value="This Week">This Week</option>
                                                            <option value="Next Week">Next Week</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label>% Complete</label>
                                                        <input type="text" class="form-control" placeholder="% Complete" ng-model="PercentComplete" ng-change="getpercentnumber()" />
                                                    </div>
                                                </div>
                                                <div class="col-sm-12" style="padding-left:0px !important;">
                                                    <div class="form-group">
                                                        <div class="col-sm-3">
                                                            <fieldset>
                                                                <label>Status</label>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioCompleted" type="radio" value="Acknowledged" ng-click="PercentCompleted()" ng-model="Completed"> 05% Acknowledged
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioCompleted" type="radio" value="working on it" ng-click="PercentCompleted()" ng-model="Completed"> 10% working on it
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioCompleted" type="radio" value="In QA review" ng-click="PercentCompleted()" ng-model="Completed"> 80% In QA Review
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioCompleted" type="radio" value="Task completed" ng-click="PercentCompleted()" ng-model="Completed">   90% Task completed
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioCompleted" type="radio" value="For Review" ng-click="PercentCompleted()" ng-model="Completed"> 93% For Review
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioCompleted" type="radio" value="For Follow-up later" ng-click="PercentCompleted()" ng-model="Completed"> 96% Follow-up later
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioCompleted" type="radio" value="Ready for marked completed" ng-click="PercentCompleted()" ng-model="Completed"> 99% Ready for Completed
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input ng-disabled="userId != 14" class="form-check-input" name="radioCompleted" type="radio" value="completed" ng-click="PercentCompleted()" ng-model="Completed"> 100% Completed
                                                                    </label>
                                                                </div>
                                                                <!--<div>
                                                                    {{Item.Editor.Id}}
                                                                    {{userId}}
                                                                    {{isOwner}}
                                                                    {{!(Item.Editor.Id==userId || isOwner==true)}}
                                                                </div>-->
                                                            </fieldset>
                                                        </div>
                                                        <div class="col-sm-2">
                                                            <fieldset>
                                                                <label>Time</label>
                                                                <input type="text" style="width:88px;" class="form-control" placeholder="Time" ng-model="Item.Mileage" />
                                                                <div class="radio">
                                                                    <label>
                                                                        <input name="radioTime" ng-checked="Item.Mileage=='05'" type="radio" ng-click="SelectTime('05')">Very Quick
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input name="radioTime" ng-checked="Item.Mileage=='15'" type="radio" ng-click="SelectTime('15')">Quick
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input name="radioTime" ng-checked="Item.Mileage=='60'" type="radio" ng-click="SelectTime('60')">Medium
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input name="radioTime" ng-checked="Item.Mileage=='240'" type="radio" ng-click="SelectTime('240')">Long
                                                                    </label>
                                                                </div>
                                                            </fieldset>
                                                        </div>
                                                        <div class="col-sm-2">
                                                            <fieldset>
                                                                <label>Priority</label>
                                                                <input type="text" style="width:71px;" class="form-control" placeholder="Priority" ng-model="PriorityRank" ng-change="getpriority()" />
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioPriority" type="radio" value="(1) High" ng-click="SelectPriority()" ng-model="Item.Priority">High
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioPriority" type="radio" value="(2) Normal" ng-click="SelectPriority()" ng-model="Item.Priority">Normal
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioPriority" type="radio" value="(3) Low" ng-click="SelectPriority()" ng-model="Item.Priority">Low
                                                                    </label>
                                                                </div>
                                                            </fieldset>
                                                        </div>
                                                        <div class="col-sm-2 no-padding">
                                                            <fieldset>
                                                                <label>Task Leader</label>
                                                            </fieldset>
                                                            <div ng-repeat="image in AssignedToUsers">
                                                                {{image.Title}}
                                                            </div>
                                                            <fieldset>
                                                                <label>Track</label>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioTrack" type="radio" value="On Track" ng-click="SelectTrack()" ng-model="Item.Track">On Track
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioTrack" type="radio" value="Slightly Off Track" ng-click="SelectTrack()" ng-model="Item.Track">Slightly Off Track
                                                                    </label>
                                                                </div>
                                                                <div class="radio">
                                                                    <label>
                                                                        <input class="form-check-input" name="radioTrack" type="radio" value="Off Track" ng-click="SelectTrack()" ng-model="Item.Track">Off Track
                                                                    </label>
                                                                </div>
                                                            </fieldset>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div ng-repeat="item in filterGroups">
                                                                <label>{{item}}</label>
                                                                <div ng-if="filterItem.Group == item" ng-repeat="filterItem in filterItems" class="pull-right">
                                                                    <input ng-checked="Item.TaskCompanies.toLowerCase().indexOf('{{filterItem.Title.toLowerCase()}}')>-1" type="checkbox" style="margin-top: -4px; margin-left: 3px;" ng-click="editCategories(filterItem.Title)" />
                                                                    {{filterItem.Title}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <div class="col-sm-11 pad0 Doc-align">
                                                                        <input type="text" class="form-control" id="txtCategories" ng-model="Item.Categories" />
                                                                    </div>
                                                                    <div class="col-sm-1 no-padding">
                                                                        <label class="full_width">&nbsp;</label>
                                                                        <img ng-src="https://www.shareweb.ch/_layouts/15/images/EMMCopyTerm.png" ng-click="openSmartTaxonomyPopup('Categories', Item.Categories);">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-12 Doc-align">
                                                                    <div class="col-sm-11 pad0 Doc-align">
                                                                        <label>Component</label>
                                                                        <input type="text" class="form-control" id="txtSharewebComponent">
                                                                    </div>
                                                                    <div class="col-sm-1 no-padding">
                                                                        <label class="full_width">&nbsp;</label>
                                                                        <img ng-src="https://www.shareweb.ch/_layouts/15/images/EMMCopyTerm.png" ng-click="openSmartTaxonomyPopup('Components', Item.SharewebComponent);">
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <div class="block" ng-repeat="item in smartComponent">{{item.Title}}<a class="hreflink" ng-click="removeSmartComponent(item.Id)"> <img ng-src="/_layouts/images/delete.gif"></a></div>
                                                                </div>
                                                            </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-offset-3 col-sm-10">
                                                                    <div class="col-sm-12 no-padding">
                                                                        <div class="col-sm-10 no-padding">
                                                                            <input type="text" class="form-control" placeholder="Url" style="width:100%;" ng-model="Item.component_x0020_link.Url" />
                                                                        </div>
                                                                        <div class="col-sm-1 no-padding mt-5">
                                                                            <a target="_blank" ng-show="Item.component_x0020_link!=undefined" ng-href="{{Item.component_x0020_link.Url}}">Open</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-10">
                                                                    <div class="col-sm-12 no-padding">
                                                                        <div class="col-sm-3">
                                                                            <h4 class="panel-title"><a class="hreflink" ng-click="showReferencePopup()">Related Tasks</a></h4>
                                                                        </div>
                                                                        <div class="col-sm-9 padL-25">
                                                                            <div class="col-sm-12" ng-repeat="item in SelectedTaskItems">
                                                                                <div class="col-sm-1  no-padding">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='Gruene'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Foundation/logo-gruene.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='Gender'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_gender.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='DE'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_de.png" />
                                                                                    <img style="width:18px;" ng-if="item.siteType =='DRR'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_drr.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='Education'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_education.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='EI'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_ei.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='EPS'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_eps.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='Health'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_health.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='QA'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_qa.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='Shareweb'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_shareweb.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='HHHH'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Foundation/icon_hhhh.png">
                                                                                    <img style="width:18px;" ng-if="item.siteType =='Small Projects'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/small_project.png">
                                                                                </div>
                                                                                <div class="col-sm-10 no-padding"><a target="_blank" ng-href="{{baseUrl}}/SitePages/Task-Profile.aspx?taskId={{item.ID}}&Site={{item.siteType}}">{{item.Title}}</a></div>
                                                                                <div class="col-sm-1 no-padding"><a class="hreflink" ng-click="removeTagedItem(item)"> <img ng-src="/_layouts/images/delete.gif"></a></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div>
                                            </td>
                                            <td valign="top" style="padding-left:5px" width="30%">
                                                <div class="panel-body pad0">
                                                    <ng-form name="CommentForm" novalidate role="form">
                                                        <div>
                                                            <label class="full_width">
                                                                Comments
                                                                <a class="pull-right morelink hreflink" title="Click to Reply" ng-show="AllCommentDetails.length>3" ng-click="EditDiscussion(SharewebCommentItem)"> All Comments({{AllCommentDetails.length}})</a>
                                                            </label>
                                                        </div>
                                                        <div style="width:100%" class="panel1 panel-default" ng-cloak>
                                                            <div class="row form-group comment-scroll">
                                                                <div class="publicationItem" ng-repeat="item in AllCommentDetails | limitTo: -3 | orderBy:'ID':true ">
                                                                    <div class="row">
                                                                        <div class="col-sm-2">
                                                                            <img style="width:95%;padding-left:5px;" ng-src="{{item.AuthorImage}}">
                                                                        </div>
                                                                        <div class="col-sm-10">
                                                                            <div class="row" style="color:#069;font-size:small;padding-left:0px">
                                                                                <span style="color:#069">{{item.AuthorName}}</span> - <span style="font-size:10px;">{{item.Created | date:'dd MMM yyyy'}}</span>
                                                                                <a class="hreflink" ng-click="editcomment(item);"><img ng-src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/SiteCollectionImages/ICONS/32/edititem.gif"></a>
                                                                                <a class="hreflink" title="Delete" ng-click="saveComment(item,'delete')"><img ng-src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/SiteCollectionImages/ICONS/32/delete.gif"></a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm-12 cmnt_box">
                                                                            <span id="pageContent" ng-bind-html="item.Description | trustedHTML"></span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-12">
                                                                    <textarea id="body" class="form-control" rows="2" ng-required="true" placeholder="Enter your comments here" ng-model="ReplyBody"></textarea>
                                                                </div>
                                                            </div>
                                                            <div class="row pull-right form-group">
                                                                <button type="button" style="margin:5px 10px 0px 0;" class="btn btn-primary" ng-disabled="CommentForm.$error.required" ng-click="createComment()" title="Save changes & exit">Post</button>
                                                            </div>
                                                        </div>
                                                    </ng-form>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <dtiv class="form-group">
                                                    <div class="col-sm-4">
                                                        <div class="mb-20" ng-if="attachments.length > 0" ng-repeat="attachedFiles in attachments">
                                                            <div ng-show="ImageName != attachedFiles.FileName">
                                                                <div style="width: 400px; height:229px;" id="sit-sharewebImagePopup-demo" ng-if="attachedFiles.FileName.toLowerCase().indexOf('.png'.toLowerCase())> -1 || attachedFiles.FileName.toLowerCase().indexOf('.jpg'.toLowerCase())> -1 || attachedFiles.FileName.toLowerCase().indexOf('.bmp'.toLowerCase())> -1">
                                                                    {{attachedFiles.FileName}}<a style="cursor:pointer;" title="Delete" data-toggle="modal" ng-click="deleteFile(attachedFiles)"><img ng-src="/_layouts/images/delete.gif"></a>

                                                                    <a class="sit-preview" target="_blank" href="{{CurrentSiteUrl}}/Lists/{{Item.siteType}}/Attachments/{{attachedItemId}}/{{attachedFiles.FileName}}"> <img ng-if="deleteAttachedFile = true" alt="{{attachedFiles.FileName}}" style="width:398px;" ng-src="{{CurrentSiteUrl}}/Lists/{{Item.siteType}}/Attachments/{{attachedItemId}}/{{attachedFiles.FileName}}" data-preview-url="{{CurrentSiteUrl}}/Lists/{{Item.siteType}}/Attachments/{{attachedItemId}}/{{attachedFiles.FileName}}"></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12 padLR0 md2">
                                                            <div class="col-sm-8 padLR0 md2">
                                                                <label class="full_width mb-5" ng-show="IsShowRemoveCopyPastIcon">Copy & Paste Image </label>
                                                            </div>
                                                            <div class="col-sm-2 no-padding glyph pull-right">
                                                                <span class="glyphicon glyphicon-plus ng-scope" style="cursor:pointer;" title="Add" data-toggle="modal" ng-click="ADDCopyPastColumn()"></span>
                                                            </div>
                                                        </div>
                                                        <div class="Doc-align">
                                                            <div ng-repeat="item in CopyPastImg" class="priority">
                                                                <div class="col-sm-11" id={{item.Id}}></div>
                                                                <div class="col-sm-1">

                                                                </div>
                                                                <span ng-show="$index+1==CopyPastImg.length" class="col-sm-offset-8 col-sm-3 no-padding">
                                                                    <button type="button" class="btn btn-primary pull-right" ng-click="UploadImageItems()">Upload</button>
                                                                    <a ng-show="IsShowRemoveCopyPastIcon && $index+1==CopyPastImg.length" style="cursor:pointer;" title="Delete" data-toggle="modal" ng-click="RemoveCopyPastColumn(CopyPastImg,$index)">
                                                                        <img class="pull-right cancel-icon" ng-src="/_layouts/images/delete.gif">
                                                                    </a>
                                                                </span>
                                                            </div>
                                                            <!--<div class="row">
                                                                <div class="col-sm-offset-8 col-sm-3 no-padding">
                                                                    <button type="button" class="btn btn-primary pull-right" ng-click="UploadImageItems()">Upload</button>
                                                                </div>
                                                            </div>-->
                                                        </div>
                                                    </div>
                                                    <!-- <shareweb-progress-bar progressBarId="'CopyPastuploadImage'"></shareweb-progress-bar> -->
                                                    <div class="col-sm-8 ">
                                                        <div ng-repeat='item in DescriptionFields'>
                                                            <div class="comnt"><span ng-show="$index==0" style="cursor:pointer;" title="Add" data-toggle="modal" class="glyphicon glyphicon-plus ng-scope" ng-click="addColumn(item)"></span></div>

                                                            <div class="col-sm-12 no-padding ">
                                                                <span class=" mt1 pull-right md2"><input type="checkbox" id="chkCompleted" name="chkCompleted" ng-model="item.Completed" ng-click="checkCompleted(Completed)"></span>
                                                                <span><a class="pull-right md2" style="cursor:pointer;" ng-click="showCommentBox(item)" id="chkCompleted">Comment</a></span>
                                                                <span>
                                                                    <a ng-show="IsShowRemoveFeedbackIcon && $index+1==DescriptionFields.length" style="cursor:pointer;" title="Delete" data-toggle="modal" ng-click="RemoveFeedbackColumn(DescriptionFields,$index)">
                                                                        <img class="pull-right mt-2" ng-src="/_layouts/images/delete.gif">
                                                                    </a>
                                                                </span>
                                                            </div>
                                                            <div class="col-sm-1 mt1  no-padding" style="width:1px;">
                                                                {{$index+1}}.
                                                            </div>
                                                            <div class="col-sm-11 mt1" ng-if='$index==0'>
                                                                <div id="editDescriptionbody" ng-model="item.Title"></div>
                                                            </div>
                                                            <div class="col-sm-11 mt1 Doc-align" ng-if="$index!=0">

                                                                <textarea ng-if="$index!=0" id="txtdescription" style="width:111%;" rows="{{RowSize(item.Title)}}" class="form-control" ng-model="item.Title"></textarea>

                                                            </div>
                                                            <!--<div class="col-sm-12 no-padding">
                                                                <span>
                                                                    <a ng-show="IsShowRemoveFeedbackIcon && $index+1==DescriptionFields.length" style="cursor:pointer;" title="Delete" data-toggle="modal" ng-click="RemoveFeedbackColumn(DescriptionFields,$index)">
                                                                        <img class="pull-right mt-2" ng-src="/_layouts/images/delete.gif">
                                                                    </a>
                                                                </span>
                                                            </div>-->
                                                            <!--<div class="row ">
                                                                <span class="row pull-right mt1"><input type="checkbox" id="chkCompleted" name="chkCompleted" ng-model="item.Completed" ng-click="checkCompleted(Completed)"></span>
                                                            </div>-->
                                                            <div class="feedbackcomment col-sm-offset-1 col-sm-11 no-padding" ng-if="item.isShowComment">
                                                                <a class="col-md-2 pull-right morelink" title="Click to Reply" style="margin-right:-18px; cursor:pointer;" ng-click="ShowAllComments(item)"> All Comments</a>
                                                                <div class=" col-sm-12 mb-2 add_cmnt" ng-repeat="comment in item.Comments  | limitTo: -2 ">
                                                                    <div id="public-item">
                                                                        <div class="col-sm-1">
                                                                            <img style="width:100%;" ng-src="{{comment.AuthorImage}}">
                                                                        </div>
                                                                        <div class="col-sm-10">
                                                                            <div class="">
                                                                                {{comment.AuthorName}} - {{comment.Created | date:'dd MMM yyyy HH:mm'}}
                                                                            </div>
                                                                            <div class="">
                                                                                {{comment.Title}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-9 col-sm-offset-2">
                                                                    <input ng-model='item.comment' style="width:100%;height: 40px;" ng-required="true" type="text" placeholder='type Comment here' />
                                                                </div>
                                                                <div class="col-sm-1 no-padding ">
                                                                    <button type="button" class="post btn btn-primary pull-right" ng-disabled="feedbackcomments.$error.required" ng-click="PostFeedback(item)">Post</button>

                                                                </div>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>
                                                    </div>
                                                </dtiv>

                                                <div class="form-group">
                                                    <div class="col-sm-6">
                                                        <div ng-if="attachments.length > 0" ng-repeat="attachedFiles in attachments">
                                                            <div ng-show="ImageName != attachedFiles.FileName">
                                                                <div ng-if="attachedFiles.FileName.toLowerCase().indexOf('.txt'.toLowerCase())> -1 || attachedFiles.FileName.toLowerCase().indexOf('.docx'.toLowerCase())> -1  || attachedFiles.FileName.toLowerCase().indexOf('.pdf'.toLowerCase())> -1  || attachedFiles.FileName.toLowerCase().indexOf('.doc'.toLowerCase())> -1 || attachedFiles.FileName.toLowerCase().indexOf('.msg'.toLowerCase())> -1 || attachedFiles.FileName.toLowerCase().indexOf('.pptx'.toLowerCase())> -1 || attachedFiles.FileName.toLowerCase().indexOf('.xls'.toLowerCase())> -1 || attachedFiles.FileName.toLowerCase().indexOf('.xlsx'.toLowerCase())> -1">
                                                                    <a ng-href="{{CurrentSiteUrl}}/Lists/{{Item.siteType}}/Attachments/{{attachedItemId}}/{{attachedFiles.FileName}}?web=1">{{attachedFiles.FileName}}</a><a style="cursor:pointer;" title="Delete" data-toggle="modal" ng-click="deleteFile(attachedFiles)"><img ng-src="/_layouts/images/delete.gif"></a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-sm-12" style="width:400px;">
                                                        <label class="full_width">Attachment</label>
                                                        <input class="form-control" ng-model="updateProfilePic" type="file" id="updateProfilePic" valid-file>

                                                    </div>

                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="teamInfo">
                                <div class="">
                                    <div class="form-group" ui-on-drop="onDropRemoveTeam($event,$data, TeamUsers)">
                                        <table width="100%">
                                            <tr>
                                                <td ng-repeat="item in TeamUsers">
                                                    <img ng-if="item.userImage!=undefined" class="AssignPriorityUserPhoto" ui-draggable="true" drag="item" on-drop-success="dropSuccessHandler($event, $index, TeamUsers)" title="{{item.Title}}" data-toggle="popover" data-trigger="hover" ng-src="{{item.userImage}}" />
                                                    <img ng-if="item.userImage==undefined" class="AssignPriorityUserPhoto" ui-draggable="true" drag="item" on-drop-success="dropSuccessHandler($event, $index, TeamUsers)" title="{{item.Title}}" data-toggle="popover" data-trigger="hover" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/32/icon_user.jpg" />
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="row" style="margin-left:0px;margin-right:0px;">
                                        <div class="col-md-9" style="padding-right:0!important;">
                                            <div class="form-group">
                                                <div class="col-sm-12 assignToDropPanel" ui-on-drop="onDropTeam($event,$data,AssignedToUsers,'TeamLeader')">
                                                    <div>
                                                        <div><img ui-draggable="true" drag="image" on-drop-success="dropSuccessHandler($event, $index, AssignedToUsers)" data-toggle="popover" data-trigger="hover" class="ProirityAssignedUserPhoto" ng-repeat="image in AssignedToUsers" title="{{image.Title}}" ng-src="{{image.userImage}}" /></div>
                                                        <span>Drag user here to assign for Team Leader...</span>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-12 assignToDropPanel" ui-on-drop="onDropTeam($event,$data,TeamMemberUsers,'TeamMember')">
                                                    <div>
                                                        <div><img ui-draggable="true" drag="image" on-drop-success="dropSuccessHandler($event, $index, TeamMemberUsers)" data-toggle="popover" data-trigger="hover" class="ProirityAssignedUserPhoto" ng-repeat="image in TeamMemberUsers" title="{{image.Title}}" ng-src="{{image.userImage}}" /></div>
                                                        <span>Drag user here to assign for Team Member...</span>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div ui-on-drop="onDropRemoveTeam($event,$data, TeamUsers)">
                                                    <img title="Drag user here to  remove user from team for this Network Activity." style="height:160px;" ng-src="https://www.shareweb.ch/site/EPS/SiteCollectionImages/ICONS/96/icon_Dustbin.png" />
                                                    <!--<div>
                                                    <span>Drag user here to  remove user from priorities for this Item...</span>
                                                                 </div>-->
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </ng-form>
       
    </div>
    <div class="ItemInfo" style="padding-top:15px;">
        <div>Created <span>{{backupItem.Created}}</span> by <span class="footerUsercolor">{{backupItem.Author.Title}}</span></div>
        <div>Last modified <span>{{backupItem.Modified}}</span> by <span class="footerUsercolor">{{backupItem.Editor.Title}}</span></div>
        <div>
            <a ng-if="isOwner==true" href="javascrpt:void(0);" ng-click="deleteTaskFromPopUp();"><img ng-src="/_layouts/images/delete.gif"> Delete this item</a> | <a href="javascrpt:void(0);" ng-click="OpenCopyItem();"> Copy Item</a>
        </div>
    </div>
    <div class="modal-footer">
        <img ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/32/icon_maill.png" /> <a ng-href="mailto:?subject=[{{Item.siteType}}-Tasks] {{Title}}&body={{baseUrl}}/SitePages/Task-Profile.aspx?taskId={{backupItem.Id}}%26Site={{Allsitetype}}">Share this task</a>
        | <a target="_blank" ng-href="{{SiteTypeUrl}}/Lists/{{Item.siteType}}/EditForm.aspx?ID={{backupItem.Id}}">Open out-of-the-box form</a>
        <button type="button" class="btn btn-primary" ng-click="updateTaskRecords()">Save</button>
        <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="cancelEditItem()">Cancel</button>
    </div>

</div>


<!--Smart taxonomy popup-->
<div id="SmartTaxonomyPopup" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" ng-click="cancelSmartTaxonomyPopup()" style="min-width: 10px;">&times;</button>
                <h4 class="modal-title">
                    Select -{{Titl}}
                </h4>
                <table class="ms-dialogHeader" cellspacing="0" cellpadding="0" border="0" width="100%" style="padding-top: 8px; padding-bottom: 10px;">
                    <tbody>
                        <tr class="">
                            <td valign="middle" align="center" style="width:0px; padding-left: 15px; padding-right: 15px;">
                                <img ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/24/EMMDoubleTag.png" alt="">
                            </td>
                            <td class="ms-dialogHeaderDescription" valign="top" style="width:100%;">
                                <div id="selectTermDescription" class="none-wordbreak">
                                    <table class="ms-dialogHeaderDescription">
                                        <tbody>
                                            <tr id="addNewTermDescription" class="">
                                                <td>New items are added under the currently selected item.</td>
                                                <td class="TaggingLinkWidth">
                                                    <a style="cursor:pointer;" ng-click="gotomanagetaxonomy();">
                                                        Add New Item
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr id="SendFeedbackTr">
                                                <td>Make a request or send feedback to the Term Set manager.</td>
                                                <td class="TaggingLinkWidth">
                                                    <a href="mailto:e-i@eda.admin.ch">
                                                        Send Feedback
                                                    </a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </td>
                            <td class="ms-dialogHelpLink" align="right" valign="top" style="width:0px; padding-right: 10px;" nowrap="nowrap">
                                <!-- Remove -->
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-body">
                <div>
                    <div class="col-sm-10" ng-hide="SmartTaxonomyName=='Topics' || SmartTaxonomyName=='Activities' || SmartTaxonomyName=='Countries' || SmartTaxonomyName=='Shareweb Pages' || SmartTaxonomyName =='Components'">
                        <input type="text" class="form-control ng-pristine ng-untouched ng-valid ng-empty ui-autocomplete-input" id="txtSmartTaxonomyPopup" ng-model="SmartTaxonomyValue" autocomplete="off"><span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
                    </div>


                </div>
                <div class="">
                    <div class="col-sm-12 ActivityBox" ng-show="SmartTaxonomyName =='Components'">
                        <span class="block" ng-repeat="item in smartComponent">{{item.Title}}<a class="hreflink" ng-click="removeSmartComponent(item.Id)"> <img ng-src="/_layouts/images/delete.gif"></a></span>
                        <div class="clearfix"></div>
                    </div>
                   
                </div>
                <div class="divPanelBody">
                    <nav id="nav_pop-up">
                        <ul id="main-menu">
                            <li ng-repeat="item in TaxonomyItems">
                                <a class="hreflink" ng-click="selectItem(item);"><img ng-if="item.Item_x005F_x0020_Cover.Url != undefined" style="height: 12px; width:18px;" ng-src="{{item.Item_x005F_x0020_Cover.Url}}"> {{item.Title}}</a>
                                <ul ng-if="item.childs.length>0" class="sub-menu clr">
                                    <li ng-repeat="child1 in item.childs">
                                        <a class="hreflink" ng-click="selectItem(child1);"><img ng-if="child1.Item_x005F_x0020_Cover.Url != undefined" style="height: 12px; width:18px;" ng-src="{{child1.Item_x005F_x0020_Cover.Url}}"> {{child1.Title}}</a>
                                        <ul ng-if="child1.childs.length>0" class="sub-menu clr2">
                                            <li ng-repeat="child2 in child1.childs">
                                                <a class="hreflink" ng-click="selectItem(child2);"><img ng-if="child2.Page_x002d_Title!=undefined && child2.ProfileType!=undefined" class="flag_icon" ng-src="{{child2.Item_x0020_Cover.Url}}"> {{child2.Title}}</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>

            </div>
            <div class="modal-footer">
                <a href="javascript:void(0);" ng-click="gotomanagetaxonomy();">Manage Smart Taxonomy</a>
                <button type="button" class="btn btn-primary" ng-click="copySelectedSmartTaxonomy()">OK</button>
            </div>
        </div>
    </div>
</div>

<div id="copyitemlist" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display: none;">
    <div class="modal-dialog" style="width:1269px;height:400px;">
        <div class="modal-content">
            <div class="modal-header" style="margin-right:20px;">
                <button type="button" class="close" data-dismiss="modal" ng-click="cancelCopyItemListPopup()" style="min-width: 10px;">&times;</button>
                <h4 class="modal-title">
                    <img class="icon-sites-img" ng-src="{{selectedSiteImage.Item_x005F_x0020_Cover.Url}}">  Select - {{backupItem.Title}} -({{Item.siteType}})
                </h4>
            </div>
            <div class="modal-body" style="min-height: 337px;overflow-y: hidden;background: #f5f5f5;">
                <div class="form-group" style="padding-top:15px;">
                    <div class="col-md-12" style="height:300px;">
                        <fieldset class="fieldsett">
                            <legend>Sites</legend>
                            <ul class="quick-actions">
                                <li ng-if="item.Title !='HHHH'" class="bg_lb" id="tileTaskList{{item.Title}}" ng-repeat="item in SitesTypes">
                                    <a ng-click="SiteDetail(item);"><span class="icon-sites"><img class="icon-sites" ng-if="item.Item_x005F_x0020_Cover!=undefined" ng-src="{{item.Item_x005F_x0020_Cover.Url}}"></span>{{item.Title}} </a>
                                </li>
                            </ul>
                        </fieldset>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-click="AddItemNewSiteList()">Save</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="cancelCopyItemListPopup()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="EditDiscussion" class="modal fade in" role="dialog" style="display: none;">
    <div class="modal-dialog" style="width: 750px;">
        <div class="modal-content">
            <ng-form name="EditDiscussionForm" novalidate role="form">
                <div class="modal-header">
                    <button type="button" class="close" ng-click="CancelEditDiscussion()" style="min-width: 10px;">&times;</button>
                    <h4 class="modal-title" ng-if="backupItem.Title!=undefined && SharewebCommentItem.Title==undefined">Comments - {{backupItem.Title}}</h4>
                    <h3 class="modal-title" ng-if="SharewebCommentItem.Title!=undefined && SharewebCommentItem.Page_x002d_Title==undefined">Comments - {{SharewebCommentItem.Title}}</h3>
                    <h3 class="modal-title" ng-if="SharewebCommentItem.Title!=undefined && SharewebCommentItem.Page_x002d_Title!=undefined">Comments - {{SharewebCommentItem.Title}}</h3>
                </div>
                <div class="modal-body" style="min-height: 323px;overflow-y: auto;">

                    <div>
                        <strong>
                            <span style="font-size:24px;"></span> All Comments:
                        </strong>
                        <div class="col-sm-offset-1 col-sm-10 mb-20 add_cmnt" ng-repeat="item in AllCommentDetails">
                            <div class="row  replyitem">
                                <div class="col-sm-2">
                                    <img style="width:95%; padding-left:5px;" ng-src="{{item.AuthorImage}}">
                                </div>
                                <div class="col-sm-10 ">
                                    <div class="row">
                                        <div class="col-sm-3 changing-width" ng-if="item.editable==false">{{item.AuthorName}} <span>-</span></div>
                                        <div class="col-sm-3 no-padding" ng-if="item.editable==true">
                                            <select class="searchbox_height drop" ng-model="item.AuthorName" ng-change="selectUser(item,item.AuthorName)">
                                                <option item.AuthorName={{user.Title}} ng-repeat="user in taskUsers">{{user.Title}}</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-8 no-padding">
                                            <div class="col-sm-4 row_width no-padding" ng-if="item.editable==false">
                                                {{item.Created | date:'dd MMM yyyy'}}
                                            </div>
                                            <div class="col-sm-8 " ng-if="item.editable==true">
                                                <datetimepicker ng-model="item.Created" ng-click="binddroplist()"
                                                                date-format="{{format}}"
                                                                name="datetimepicker"
                                                                hidden-time="true" show-weeks="false" show-button-bar="false"></datetimepicker>
                                            </div>
                                            <a class="hreflink" ng-click="editcomment(item);"><img ng-src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/SiteCollectionImages/ICONS/32/edititem.gif"></a>
                                            <a ng-if="item.editable!=true" class="hreflink" title="Delete" ng-click="saveComment(item,'delete')"><img ng-src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/SiteCollectionImages/ICONS/32/delete.gif"></a>
                                            <!--<a class="hreflink" title="Save" ng-click="saveComment(item,'update')"><img style="width:22px;" ng-src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/SiteCollectionImages/ICONS/32/save.png"></a>-->
                                            <!--<a ng-show="item.editable==true" class="hreflink" title="Cancel" ng-click="cancelComment(item)"><img style="width:22px;" ng-src="https://hhhhteams.sharepoint.com/sites/HHHHTeams/SiteCollectionImages/ICONS/32/cancel.png"></a>-->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-11 pad0">
                                            <span ng-bind-html="item.Description | trustedHTML"></span>
                                            <!--<span ng-if="item.editable==undefined || item.editable==false">{{item.Description}}</span>
                                            <textarea ng-if="item.editable==true" rows="6" class="form-control" ng-model="item.Description"></textarea>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row tabdetail">
                            <div class="col-sm-offset-1 col-sm-10 mb-20">
                                <textarea id="body" class="form-control" rows="4" style="width:100%" ng-required="true" placeholder="Add Comment" ng-model="ReplyBody"></textarea>
                            </div>

                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-disabled="EditDiscussionForm.$error.required" ng-click="createComment()" title="Save changes & exit">Save</button>
                    <button type="button" class="btn btn-default" ng-click="CancelEditDiscussion()" title="Discard unsaved changes & exit">Cancel</button>
                </div>
            </ng-form>
        </div>
    </div>
</div>

<div id="updateReplyPopUp" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" id="mymodal">
    <div class="modal-dialog" id="update">
        <div class="modal-content">
            <div class="modal-header">
                <h3 ng-if="backupItem.Title">Reply - {{backupItem.Title}}</h3>
                <h3 ng-if="SharewebCommentItem.Title!=undefined">Reply - {{SharewebCommentItem.Title}}</h3>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <div class="col-sm-12">
                        <div id="updateReplybody" ng-model="updateReplyComment"></div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-click="saveUpdatedReply()" title="Save changes & exit">Save</button>
                <button type="button" class="btn btn-default" ng-click="CancelupdateReplyPopUp()" title="Discard unsaved changes & exit">Cancel</button>
            </div>
        </div>
    </div>
</div>
<div id="ShowAllComments" class="modal fade in" role="dialog" style="display: none;">
    <div class="modal-dialog" style="width:852px;">
        <div class="modal-content">
            <ng-form name="FeedbackForm" novalidate role="form">
                <div class="modal-header">
                </div>
                <div class="modal-body" style="min-height:323px; overflow-y:auto;">
                    <ng-form name="EditForm" novalidate role="form">
                        <div class="overflow400">
                            <strong>
                                <span style="font-size:24px;"></span> All Comments:
                            </strong>
                            <div class="col-sm-offset-1 col-sm-10 mb-2 add_cmnt" ng-repeat="comment in Feedback.Comments">
                                <div id="public-item">
                                    <div class="col-sm-2">
                                        <img style="width:95%;padding-left:5px;" ng-src="{{comment.AuthorImage}}">
                                    </div>
                                    <div class="col-sm-10">
                                        <div class="row">
                                            <div class="col-sm-3 changing-width" ng-if="comment.editableItem==false">{{comment.AuthorName}} <span>-</span></div>
                                            <div class="col-sm-3 no-padding" ng-if="comment.editableItem==true">
                                                <select class="searchbox_height drop" ng-model="comment.AuthorName" ng-change="selectUser(comment,comment.AuthorName)">
                                                    <option comment.AuthorName={{user.Title}} ng-repeat="user in taskUsers">{{user.Title}}</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-8 no-padding" style="padding-right:4px;">
                                                <div class="col-sm-4 no-padding" ng-if="comment.editableItem==false">
                                                    {{comment.Created | date:'dd MMM yyyy'}}
                                                </div>
                                                <div class="col-sm-8 " ng-if="comment.editableItem==true">
                                                    <datetimepicker ng-model="comment.Created" ng-click="binddroplist()"
                                                                    date-format="{{format}}"
                                                                    name="datetimepicker"
                                                                    hidden-time="true" show-weeks="false" show-button-bar="false"></datetimepicker>
                                                </div>
                                                <a href="javascript:void(0);" ng-click="editcommentItem(comment);"><img style="width:15px;" ng-src="/_layouts/images/edititem.gif"></a>
                                                <a ng-show="comment.editableItem==true" href="javascript:void(0)" title="Save" ng-click="saveCommentItem(comment,$index)"><img style="width:15px;" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/32/save.png"></a>
                                                <a class="hreflink" title="Delete" ng-click="removeComment(Feedback.Comments,$index)"><img style="width:15px;" ng-src="/_layouts/images/delete.gif"></a>
                                                <a ng-show="comment.editableItem==true" href="javascript:void(0)" title="Cancel" ng-click="cancelCommentItem(comment)"><img style="width:15px;" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/32/cancel.png"></a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div ng-if="comment.editableItem==false">{{comment.Title}}</div>
                                            <textarea style="overflow:hidden;" ng-if="comment.editableItem==true" rows="2" class="form-control" ng-model="comment.Title"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-5 mt-2 ">
                            <div class="col-sm-offset-2 col-sm-8 padLR0">
                                <input ng-model='Feedback.comment' style="width:94%;height: 41px;" ng-required="true" type="text" placeholder='type Comment here' />
                            </div>
                            <div class="col-sm-1 ">
                                <button type="button" class="btn btn-primary pull-right" ng-disabled="FeedbackForm.$error.required" ng-click="PostFeedback(Feedback)">Post</button>
                            </div>
                        </div>
                    </ng-form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" ng-click="CancelComments()" title="Discard unsaved changes & exit">Cancel</button>
                </div>
            </ng-form>
        </div>
    </div>
</div>




<!-- select refrence item popup -------------------------------------------------------------->
<div id="Referencepopup" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display: none;">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" ng-click="hideReferencePopup()" style="min-width: 10px;">&times;</button>
                <h4 class="modal-title">Select Related Tasks</h4>
            </div>
            <div>
                <div class="tabBox clearfix">
                    <div id="itemtabs" class="exTab3">
                    </div>
                    <div class="tab-content Doc-align">
                        <ul class="quick-actions Reference">
                            <!--<span ng-if="selectedTaxType =='Priority Rank'">-->
                            <!--<ul class="quick-actions">-->
                            <!--<li ng-click="loadTasksPriority('High')" ng-if="selectedTaxType =='Priority Rank'" class="high_priority_border"><span style="font-size: 17px;">High</span></li>
                            <li ng-click="loadTasksPriority('Normal')" ng-if="selectedTaxType =='Priority Rank'" class="normal_priority_border"><span style="font-size: 17px;">Normal</span></li>
                            <li ng-click="loadTasksPriority('Low')" ng-if="selectedTaxType =='Priority Rank'" class="low_priority_border"><span style="font-size: 17px;">Low</span></li>-->
                            <!--</ul>-->
                            <!--</span>-->
                            <li class="bg_lb" id="tileTaskList{{item.Id}}" ng-repeat="item in SitesTypes">
                                <a ng-click="SelectedSiteDetail(item);"><span class="icon-sites"><img class="icon-sites" ng-if="item.Item_x005F_x0020_Cover!=undefined" src="{{item.Item_x005F_x0020_Cover.Url}}"></span>{{item.Title}} </a>

                            </li>
                        </ul>

                    </div>
                </div>
            </div>

            <div>
                <div>
                    <div class="panel panel-primary-head blocks" id="t_draggable1">
                        <div>
                            <div class="table-responsive section-event" id="testDiv1">
                                <div class="container-new">
                                    <table id="tasks" class="tables_ui table table-info table-striped mb30 table table-hover">
                                        <thead>
                                            <tr>
                                                <th style="width:1%;"><div style="width:1%;"></div></th>
                                                <th style="width:1%;"><div style="width:1%;"></div></th>
                                                <th style="width:28%;">
                                                    <div style="width:28%;">
                                                        <input type="text" id="searchTaskName" placeholder="Task Title" class="form-control searchbox_height" ng-model="category.searchTaskName" />
                                                        <span class="searchclear" ng-click="clearControl('searchTaskName', category)">X</span>
                                                        <span class="{{orderBy=='Title'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('Title', false)"></span>
                                                        <span class="{{orderBy=='Title'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('Title', true)"></span>
                                                    </div>
                                                </th>
                                                <th style="width:14%;">
                                                    <div style="width:14%;">
                                                        <input type="text" id="searchPercentComplete" placeholder="Categories" class="form-control searchbox_height" ng-model="category.searchCategories" />
                                                        <span class="searchclear" ng-click="clearControl('searchCategories', Categories)">X</span>
                                                        <span class="{{orderBy=='Categories'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('Categories', false)"></span>
                                                        <span class="{{orderBy=='Categories'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('Categories', true)"></span>
                                                    </div>
                                                </th>
                                                <th style="width:7%;">
                                                    <div style="width:6%;">
                                                        <input type="text" id="searchPercentComplete" placeholder="%age" class="form-control searchbox_height" ng-model="category.searchPercentComplete" />
                                                        <span class="searchclear" ng-click="clearControl('searchPercentComplete', category)">X</span>
                                                        <span class="{{orderBy=='PercentComplete'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('PercentComplete', false)"></span>
                                                        <span class="{{orderBy=='PercentComplete'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('PercentComplete', true)"></span>
                                                    </div>
                                                </th>
                                                <th style="width:7%;">
                                                    <div style="width:6%;">
                                                        <input type="text" id="searchPriority" placeholder="Priority" class="form-control searchbox_height" ng-model="category.searchPriority" />
                                                        <span class="searchclear" ng-click="clearControl('searchPriority', category)">X</span>
                                                        <span class="{{orderBy=='Priority_x0020_Rank'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('Priority_x0020_Rank', false)"></span>
                                                        <span class="{{orderBy=='Priority_x0020_Rank'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('Priority_x0020_Rank', true)"></span>
                                                    </div>
                                                </th>
                                                <th style="width:12%;">
                                                    <div style="width:12%;">
                                                        <input type="text" id="searchModified" placeholder="Modified" class="form-control searchbox_height" ng-model="category.searchModified" />
                                                        <span class="searchclear" ng-click="clearControl('searchModified', category)">X</span>
                                                        <span class="{{orderBy=='DateModified'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('DateModified', false)"></span>
                                                        <span class="{{orderBy=='DateModified'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('DateModified', true)"></span>
                                                    </div>
                                                </th>
                                                <th style="width:10%;">
                                                    <div style="width:10%;">
                                                        <input type="text" id="searchDueDate" placeholder="Due Date" class="form-control searchbox_height" ng-model="category.searchDueDate" />
                                                        <span class="searchclear" ng-click="clearControl('searchDueDate', category)">X</span>
                                                        <span class="{{orderBy=='DueDate'&&!reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-up direction-arrow arrow_up" ng-click="sortBy('DueDate', false)"></span>
                                                        <span class="{{orderBy=='DueDate'&&reverse?'glyphicon_active':'glyphicon'}}  glyphicon-chevron-down direction-arrow arrow_down" ng-click="sortBy('DueDate', true)"></span>
                                                    </div>
                                                </th>
                                                <th style="width:1%;"><div style="width:1%;" class="search"></div></th>
                                                <th style="width:1%;"><div style="width:1%;" class="search"></div></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ui-draggable="true" drag="item" class="itemRow" ng-repeat="item in filtered = (AllSitesTask  | orderBy:orderBy:reverse | filter:globalSearch | filter:{Title:category.searchTaskName,PercentComplete:category.searchPercentComplete,Priority_x0020_Rank:category.searchPriority,Modified:category.searchModified,TaskDueDate:category.searchDueDate,Categories:searchCategories})">
                                                <td>
                                                    <input ng-checked="CheckSelectedItem(item)" ng-model="item.Selected" type="checkbox" name="checkboxSelectProject" ng-click="selectTaskItemDetail(item)">
                                                </td>
                                                <td>
                                                    <img style="width:18px;" ng-if="item.siteType =='Gruene'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Foundation/logo-gruene.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='Gender'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_gender.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='DE'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_de.png" />
                                                    <img style="width:18px;" ng-if="item.siteType =='DRR'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_drr.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='Education'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_education.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='EI'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_ei.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='EPS'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_eps.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='Health'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_health.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='QA'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_qa.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='Shareweb'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/site_shareweb.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='HHHH'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Foundation/icon_hhhh.png">
                                                    <img style="width:18px;" ng-if="item.siteType =='Small Projects'" class="icon-sites-img" ng-src="{{baseUrl}}/SiteCollectionImages/ICONS/Shareweb/small_project.png">
                                                </td>
                                                <td ng-click="EditTask(item)">
                                                    {{item.Title}}
                                                </td>
                                                <td ng-click="EditTask(item)">
                                                    {{item.Categories}}
                                                </td>
                                                <td ng-click="EditTask(item)" class="complete_dashboard">
                                                    {{item.PercentComplete}}%
                                                </td>
                                                <!-- <td ng-click="EditTask(item)" ng-if="category.cols==12"> -->
                                                <!-- {{item.Priority_x0020_Rank}} -->
                                                <!-- </td> -->
                                                <td ng-click="EditTask(item)">
                                                    {{item.Priority_x0020_Rank}}
                                                </td>
                                                <td ng-click="EditTask(item)">
                                                    {{item.Modified}}
                                                </td>
                                                <td ng-click="EditTask(item)">
                                                    <img ng-if="item.TrackTask=='On Track'" style="width:12px;" title="On Track" ng-src="{{siteUrl}}/SiteCollectionImages/ICONS/24/Gdot.png">
                                                    <img ng-if="item.TrackTask=='Slightly Off Track'" style="width:12px;" title="Slightly Off Track" ng-src="{{siteUrl}}/SiteCollectionImages/ICONS/24/Ydot.png">
                                                    <img ng-if="item.TrackTask=='Off Track'" style="width:12px;" title="Off Track" ng-src="{{siteUrl}}/SiteCollectionImages/ICONS/24/Rdot.png">
                                                    {{item.TaskDueDate}}
                                                </td>
                                                <td>
                                                    <a class="hreflink" ng-if="isMemberOwner==true" title="Edit" data-toggle="modal" ng-click="EditTask(item)"><img class="img-focus" ng-src="/_layouts/images/edititem.gif"> </a>
                                                </td>
                                                <td>
                                                    <a class="hreflink" ng-if="isOwner==true" title="Delete" data-toggle="modal" ng-click="deleteitem(item,category.tasks);"><img ng-src="/_layouts/images/delete.gif"></a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!--</fieldset>-->
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-click="cancelReferenceTask()" title="select project number">Ok</button>
            </div>
        </div>
    </div>
</div>

<div id="UpdatecommentItem" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display: none;">
    <div class="modal-dialog modal-help">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" ng-click="cancelCommentPopUp()" style="min-width: 10px;">&times;</button>
                <h4 class="modal-title">Update Comment</h4>
            </div>
            <div class="modal-body" style="overflow-y: hidden;">
                <div class="" style="padding-top:15px;">
                    <div class="col-md-12">
                        <div id="updateCommentItem"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-top:1px solid transparent;">
                <div>
                    <span class="pull-right">
                        <button type="button" class="btn btn-primary" ng-click="saveUpdateComment()">Save</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="cancelCommentPopUp()">Cancel</button>
                    </span>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- END select refrence item popup -->
